(()=>{"use strict";class t extends HTMLElement{shadowRoot;iframeLoaded=!1;domRefFrame;domRefImg;domRefPlayButton;hash=void 0;videoTitle="Video";static preconnected=!1;constructor(){super(),this.setupDom()}static get observedAttributes(){return["videoid"]}connectedCallback(){this.addEventListener("pointerover",t.warmConnections,{once:!0}),this.addEventListener("click",(()=>this.addIframe()))}get isUnlisted(){return this.hasAttribute("unlisted")}get hasCustomPlaceholder(){return this.hasAttribute("customPlaceholder")}get customPlaceholder(){return this.getAttribute("customPlaceholder")||""}get videoId(){const t=this.getAttribute("videoid");if(!t)return"";if(this.isUnlisted){const[e,i]=t.split("/");return this.hash=i,e}return t}set videoId(t){this.setAttribute("videoid",t)}get videoPlay(){return this.getAttribute("videoPlay")||"Play"}set videoPlay(t){this.setAttribute("videoPlay",t)}get videoStartAt(){return this.getAttribute("start")||"0s"}set videoStartAt(t){this.setAttribute("start",t)}get autoLoad(){return this.hasAttribute("autoload")}set autoLoad(t){t?this.setAttribute("autoload",""):this.removeAttribute("autoload")}get autoPlay(){return this.hasAttribute("autoplay")}set autoPlay(t){t?this.setAttribute("autoplay","autoplay"):this.removeAttribute("autoplay")}setupDom(){const t=this.attachShadow({mode:"open"});t.innerHTML=this.addStyles()+this.addPictureElement(),this.domRefFrame=t.querySelector("#frame"),this.domRefImg={fallback:t.querySelector("#fallbackPlaceholder"),webp:t.querySelector("#webpPlaceholder"),jpeg:t.querySelector("#jpegPlaceholder")},this.domRefPlayButton=t.querySelector(".lvo-playbtn")}addStyles(){return` <style>\n        :host {\n          contain: content;\n          display: block;\n          position: relative;\n          width: 100%;\n          aspect-ratio:16 / 9;\n        }\n\n        #frame, #fallbackPlaceholder, iframe {\n          position: absolute;\n          height:100%;\n          width:100%;\n        }\n\n        #frame {\n          cursor: pointer;\n        }\n\t\t#fallbackPlaceholder {\n\t\t\tobject-fit: cover;\n\t\t}\n\n\t  #frame::before {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\t${this.hasCustomPlaceholder?"":"background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==);"}\n\t\tbackground-position: top;\n\t\theight: 60px;\n\t\tpadding-bottom: 50px;\n\t\twidth: 100%;\n\t\ttransition: all 0.2s cubic-bezier(0, 0, 0.2, 1);\n\t\tz-index: 1;\n\t  }\n\t  /* play button */\n\t  .lvo-playbtn {\n\t\twidth: 70px;\n\t\theight: 46px;\n\t\tbackground-color: #212121;\n\t\tz-index: 1;\n\t\topacity: 0.8;\n\t\tborder-radius: 10%;\n\t\ttransition: all 0.2s cubic-bezier(0, 0, 0.2, 1);\n\t\tborder: 0;\n\t  }\n\t  #frame:hover .lvo-playbtn {\n\t\tbackground-color: rgb(98, 175, 237);\n\t\topacity: 1;\n\t\tcursor: pointer;\n\t  }\n\t  /* play button triangle */\n\t  .lvo-playbtn:before {\n\t\tcontent: '';\n\t\tborder-style: solid;\n\t\tborder-width: 11px 0 11px 19px;\n\t\tborder-color: transparent transparent transparent #fff;\n\t  }\n\t  .lvo-playbtn,\n\t  .lvo-playbtn:before {\n\t\tposition: absolute;\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\ttransform: translate3d(-50%, -50%, 0);\n\t  }\n\n\t  /* Post-click styles */\n\t  .lvo-activated {\n\t\tcursor: unset;\n\t  }\n\n\t  #frame.lvo-activated::before,\n\t  .lvo-activated .lvo-playbtn,\n\t  .lvo-activated picture {\n\t\tdisplay: none;\n\t  }\n\t}\n    </style>`}addPictureElement(){return`<div id="frame"><picture>\n        ${this.hasCustomPlaceholder?`<img id="fallbackPlaceholder"\n\t\t\t\tsrc="${this.customPlaceholder}"\n\t\t\t\tdecoding="async"\n\t\t\t\tloading="lazy" />`:'\n\t\t<source id="webpPlaceholder" type="image/webp">\n\t\t<source id="jpegPlaceholder" type="image/jpeg">\n\t\t<img id="fallbackPlaceholder"\n\t\t\t referrerpolicy="origin"\n\t\t\t width="1100"\n\t\t\t height="619"\n\t\t\t decoding="async"\n\t\t\t loading="lazy" />\n\t  '}\n\t\t'</picture><button class="lvo-playbtn"></button>'\n      </div>`}setupComponent(){this.initImagePlaceholder(),this.setAttribute("title",`${this.videoPlay}: ${this.videoTitle}`),this.domRefPlayButton.setAttribute("aria-label",`${this.videoPlay}: ${this.videoTitle}`),this.autoLoad&&this.initIntersectionObserver()}attributeChangedCallback(t,e,i){"videoid"===t&&e!==i&&(this.setupComponent(),this.domRefFrame.classList.contains("lvo-activated")&&(this.domRefFrame.classList.remove("lvo-activated"),this.shadowRoot?.querySelector("iframe").remove()))}addIframe(){if(!this.iframeLoaded){const t=this.getIFrameParams(),e=`/video/${this.videoId}`+(this.isUnlisted?`?h=${this.hash}&${t}`:`?${t}`),i=new URL(e,"https://player.vimeo.com/"),o=`\n\t\t<iframe frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope" allowfullscreen autoplay="true" ${this.autoPlay?'muted="true"':""} src="${i}"></iframe>`;this.domRefFrame.insertAdjacentHTML("beforeend",o),this.domRefFrame.classList.add("lvo-activated"),this.iframeLoaded=!0}}getIFrameParams(){return`dnt=1&hd=1&autohide=1&loop=1&autoplay=1${this.autoPlay?"&muted=1":""}&#t=${this.videoStartAt}`}initImagePlaceholder=async()=>{if(this.isUnlisted)return;t.preconnected||t.addPrefetch("preconnect","https://i.vimeocdn.com/");const e=`https://vimeo.com/api/v2/video/${this.videoId}.json`,i=(await(await fetch(e)).json())[0].thumbnail_large,o=i.substr(i.lastIndexOf("/")+1).split("_")[0],a=`https://i.vimeocdn.com/video/${o}.webp?mw=1100&mh=619&q=70`,n=`https://i.vimeocdn.com/video/${o}.jpg?mw=1100&mh=619&q=70`;this.domRefImg.webp.srcset=a,this.domRefImg.jpeg.srcset=n,this.domRefImg.fallback.src=n,this.domRefImg.fallback.setAttribute("aria-label",`${this.videoPlay}: ${this.videoTitle}`),this.domRefImg.fallback.setAttribute("alt",`${this.videoPlay}: ${this.videoTitle}`)};initIntersectionObserver(){"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&new IntersectionObserver(((e,i)=>{e.forEach((e=>{e.isIntersecting&&!this.iframeLoaded&&(t.warmConnections(),this.addIframe(),i.unobserve(this))}))}),{root:null,rootMargin:"0px",threshold:0}).observe(this)}static addPrefetch(t,e,i=null){const o=document.createElement("link");o.rel=t,o.href=e,i&&(o.as=i),o.crossOrigin="true",document.head.append(o)}static warmConnections(){t.preconnected||(Object.entries({preconnect:["https://f.vimeocdn.com","https://player.vimeo.com","https://i.vimeocdn.com"]}).forEach((([e,i])=>{i.forEach((i=>t.addPrefetch(e,i)))})),t.preconnected=!0)}}customElements.define("lite-vimeo",t)})();